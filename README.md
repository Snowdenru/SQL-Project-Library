# Система управления библиотекой: Raw SQL vs SQLAlchemy ORM

## Обзор проекта

Этот проект демонстрирует два подхода к реализации системы управления библиотекой:
1. **Raw SQL** - Прямые SQL-запросы с использованием SQLite3
2. **ORM (SQLAlchemy)** - Объектно-реляционное отображение с SQLAlchemy и Alembic

Система управляет книгами, авторами и жанрами с базовыми CRUD-операциями и функционалом поиска.

## Функционал

### Общие возможности (обе реализации)
- Добавление/Просмотр/Редактирование авторов
- Добавление/Просмотр жанров
- Добавление книг с указанием авторов и жанров
- Поиск книг по:
  - Автору
  - Жанру
  - Частичному совпадению названия/имени автора

### Особенности Raw SQL
- Прямое выполнение SQL-запросов
- Ручное управление подключениями
- Параметризованные запросы для безопасности
- Использование SQLite3 в качестве БД

### Особенности ORM
- Модели SQLAlchemy для схемы БД
- Alembic для миграций БД
- Объектно-ориентированный доступ к данным
- Управление сессиями
- Работа со связями через ORM

## Установка

### Требования
- Python 3.8+
- Менеджер пакетов pip

### Настройка

1. Клонируйте репозиторий:
   ```bash
   git clone <url-репозитория>
   cd library-management
   ```

2. Установите зависимости:
   ```bash
   pip install sqlalchemy alembic
   ```

## Использование

### Реализация на Raw SQL

1. Запустите приложение:
   ```bash
   python raw_sql_app.py
   ```

2. Следуйте меню для:
   - Добавления авторов, жанров и книг
   - Поиска и просмотра существующих записей
   - Выполнения различных библиотечных операций

### Реализация на ORM

1. Инициализируйте БД (только при первом запуске):
   ```bash
   alembic upgrade head
   ```

2. Запустите приложение:
   ```bash
   python orm_app.py
   ```

3. Используйте интерактивное меню, аналогичное версии на Raw SQL

## Структура базы данных

Обе реализации используют одинаковую схему БД:

### Таблицы
- `authors` - Информация об авторах
- `genres` - Жанры книг
- `books` - Информация о книгах
- `book_genre` - Связующая таблица для связи многие-ко-многим между книгами и жанрами

## Миграции (только для ORM)

Для создания новой миграции после изменения моделей:
```bash
alembic revision --autogenerate -m "описание изменений"
alembic upgrade head
```

## Сравнение подходов

| Особенность           | Raw SQL                          | SQLAlchemy ORM                   |
|-----------------------|----------------------------------|-----------------------------------|
| Подключение к БД      | Ручное управление               | На основе сессий                 |
| Построение запросов   | Конкатенация строк              | Цепочка методов Python           |
| Безопасность          | Параметризованные запросы       | Автоматическое экранирование     |
| Изменения схемы       | Ручные SQL-скрипты              | Миграции Alembic                 |
| Связи между таблицами | Ручные JOIN                     | Навигация по объектам            |
| Производительность    | Немного быстрее                 | Немного медленнее, но удобнее    |
| Лучше подходит для    | Простых приложений, полный контроль | Сложных доменных моделей, быстрой разработки |

## Участие в разработке

1. Форкните репозиторий
2. Создайте ветку для новой функции
3. Зафиксируйте изменения
4. Запушьте ветку
5. Создайте Pull Request

## Лицензия

MIT License

## Планы по улучшению

- Добавить аутентификацию пользователей
- Реализовать выдачу/возврат книг
- Добавить расширенные отчеты
- Поддержку различных СУБД
- Веб-интерфейс

## Контакты

По вопросам и предложениям пишите на [ваш-email@example.com]
